command: docker container prune
short: 清理所有已停止的容器
long: 清理所有已停止的容器。
usage: docker container prune [OPTIONS]
pname: docker container
plink: docker_container.yaml
options:
    - option: filter
      value_type: filter
      description: 提供过滤器取值（例如 `until=<timestamp>`）
      details_url: '#filter'
      deprecated: false
      hidden: false
      experimental: false
      experimentalcli: false
      kubernetes: false
      swarm: false
    - option: force
      shorthand: f
      value_type: bool
      default_value: "false"
      description: 不提示确认（强制执行）
      deprecated: false
      hidden: false
      experimental: false
      experimentalcli: false
      kubernetes: false
      swarm: false
inherited_options:
    - option: help
      value_type: bool
      default_value: "false"
      description: 打印用法
      deprecated: false
      hidden: true
      experimental: false
      experimentalcli: false
      kubernetes: false
      swarm: false
examples: |-
    ### 清理容器

    ```console
    $ docker container prune
    WARNING! This will remove all stopped containers.
    Are you sure you want to continue? [y/N] y
    Deleted Containers:
    4a7f7eebae0f63178aff7eb0aa39cd3f0627a203ab2df258c1a00b456cf20063
    f98f9c2aa1eaf727e4ec9c0283bc7d4aa4762fbdba7f26191f26c97f64090360

    Total reclaimed space: 212 B
    ```

    ### 过滤器 (--filter) {#filter}

    过滤选项（`--filter`）的格式为 "key=value"。如需指定多个过滤条件，请传入多个 `--filter` 标志（例如 `--filter "foo=bar" --filter "bif=baz"`）。

    当前支持的过滤器包括：

    * until (`<timestamp>`) —— 仅清理在指定时间戳之前创建的容器。
    * label（`label=<key>`、`label=<key>=<value>`、`label!=<key>` 或 `label!=<key>=<value>`）—— 仅清理具有（或在使用 `label!=...` 时不具有）指定标签的容器。

    `until` 过滤器可接受 Unix 时间戳、日期格式的时间戳，或由 [ParseDuration](https://pkg.go.dev/time#ParseDuration) 支持的 Go 时长字符串（例如 `10m`、`1h30m`）。这些值均以守护进程所在机器的时间为基准进行计算。支持的日期时间格式包括 RFC3339Nano、RFC3339、`2006-01-02T15:04:05`、`2006-01-02T15:04:05.999999999`、`2006-01-02T07:00` 和 `2006-01-02`。如果未在时间戳末尾提供 `Z` 或 `+-00:00` 时区偏移，将使用守护进程的本地时区。提供 Unix 时间戳时，请输入 `seconds[.nanoseconds]`，其中 `seconds` 为自 1970-01-01 00:00:00 UTC（不含闰秒，亦称 Unix epoch/Unix time）以来经过的秒数，`.nanoseconds` 为可选的纳秒小数部分（最多 9 位）。

    `label` 过滤器支持两种形式：其一为 `label=...`（`label=<key>` 或 `label=<key>=<value>`），用于清理带有指定标签的容器；其二为 `label!=...`（`label!=<key>` 或 `label!=<key>=<value>`），用于清理不带指定标签的容器。

    以下示例清理创建时间早于 5 分钟的容器：

    ```console
    $ docker ps -a --format 'table {{.ID}}\t{{.Image}}\t{{.Command}}\t{{.CreatedAt}}\t{{.Status}}'

    CONTAINER ID        IMAGE               COMMAND             CREATED AT                      STATUS
    61b9efa71024        busybox             "sh"                2017-01-04 13:23:33 -0800 PST   Exited (0) 41 seconds ago
    53a9bc23a516        busybox             "sh"                2017-01-04 13:11:59 -0800 PST   Exited (0) 12 minutes ago

    $ docker container prune --force --filter "until=5m"

    Deleted Containers:
    53a9bc23a5168b6caa2bfbefddf1b30f93c7ad57f3dec271fd32707497cb9369

    Total reclaimed space: 25 B

    $ docker ps -a --format 'table {{.ID}}\t{{.Image}}\t{{.Command}}\t{{.CreatedAt}}\t{{.Status}}'

    CONTAINER ID        IMAGE               COMMAND             CREATED AT                      STATUS
    61b9efa71024        busybox             "sh"                2017-01-04 13:23:33 -0800 PST   Exited (0) 44 seconds ago
    ```

    以下示例清理创建时间早于 `2017-01-04T13:10:00` 的容器：

    ```console
    $ docker ps -a --format 'table {{.ID}}\t{{.Image}}\t{{.Command}}\t{{.CreatedAt}}\t{{.Status}}'

    CONTAINER ID        IMAGE               COMMAND             CREATED AT                      STATUS
    53a9bc23a516        busybox             "sh"                2017-01-04 13:11:59 -0800 PST   Exited (0) 7 minutes ago
    4a75091a6d61        busybox             "sh"                2017-01-04 13:09:53 -0800 PST   Exited (0) 9 minutes ago

    $ docker container prune --force --filter "until=2017-01-04T13:10:00"

    Deleted Containers:
    4a75091a6d618526fcd8b33ccd6e5928ca2a64415466f768a6180004b0c72c6c

    Total reclaimed space: 27 B

    $ docker ps -a --format 'table {{.ID}}\t{{.Image}}\t{{.Command}}\t{{.CreatedAt}}\t{{.Status}}'

    CONTAINER ID        IMAGE               COMMAND             CREATED AT                      STATUS
    53a9bc23a516        busybox             "sh"                2017-01-04 13:11:59 -0800 PST   Exited (0) 9 minutes ago
    ```
deprecated: false
hidden: false
min_api_version: "1.25"
experimental: false
experimentalcli: false
kubernetes: false
swarm: false

