---
description: 在容器中持久化数据的概览
title: 存储
weight: 20
keywords: storage, persistence, data persistence, volumes, mounts, bind mounts, tmpfs
aliases:
  - /engine/admin/volumes/
  - /storage/
---

默认情况下，容器内创建的所有文件都会写入容器的可写层，该可写层叠加在只读、不可变的镜像层之上。

当容器被销毁时，写入可写层的数据不会保留。这意味着当其他进程需要这些数据时，很难从容器中将其取出。

每个容器的可写层都是唯一且相互独立的。难以将可写层中的数据提取到宿主机，或迁移到其他容器。

## 存储挂载选项

Docker 支持以下几种方式，将数据存放在容器可写层之外：

- [卷挂载](#volume-mounts)
- [绑定挂载](#bind-mounts)
- [tmpfs 挂载](#tmpfs-mounts)
- [命名管道](#named-pipes)

无论选择哪种挂载方式，从容器内部看，数据的呈现方式相同：要么是目录，要么是容器文件系统中的单个文件。

### 卷挂载

卷是由 Docker 守护进程管理的持久化存储机制。即便删除了使用该卷的容器，数据仍会保留。卷的数据存放在宿主机文件系统上，但要访问卷中的数据，必须将该卷挂载到容器中。直接在宿主机上访问或修改卷数据不受支持，行为未定义，可能导致卷或其中的数据以不可预期的方式损坏。

卷非常适合性能敏感的数据处理与长期存储需求。由于存储位置由守护进程所在的主机管理，卷通常能提供接近直接访问宿主机文件系统的原生性能。

### 绑定挂载

绑定挂载在宿主机的某个路径与容器之间建立直接关联，使容器可以访问宿主机任意位置的文件或目录。由于它不受 Docker 隔离，宿主机上的非 Docker 进程与容器内的进程都可以同时修改这些被挂载的文件。

当需要容器与宿主机同时访问同一份文件时，绑定挂载更合适。

### tmpfs 挂载

tmpfs 挂载将文件直接存放在宿主机内存中，确保数据不会写入磁盘。这是一种临时存储：当容器停止或重启，或宿主机重启时，数据会丢失。tmpfs 不会将数据持久化到宿主机或容器的文件系统中。

这类挂载适用于需要临时、内存级存储的场景，例如缓存中间数据、处理凭据等敏感信息，或减少磁盘 I/O。仅当数据不需在当前容器会话之外保留时，才使用 tmpfs 挂载。

### 命名管道

[命名管道](https://docs.microsoft.com/en-us/windows/desktop/ipc/named-pipes)
用于宿主机与容器之间的通信。常见做法是在容器内运行第三方工具，通过命名管道连接 Docker 引擎 API。

## 进一步阅读

- 了解更多关于[卷](./volumes.md)。
- 了解更多关于[绑定挂载](./bind-mounts.md)。
- 了解更多关于[tmpfs 挂载](./tmpfs.md)。
- 了解更多关于[存储驱动](/engine/storage/drivers/)。存储驱动与绑定挂载或卷无关，用于管理容器可写层上的数据存储。
