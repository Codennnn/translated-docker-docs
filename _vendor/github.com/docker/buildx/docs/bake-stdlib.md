---
title: Bake 标准库函数
---

<!---MARKER_STDLIB_START-->

| Name                     | 描述                                                                                                                                                                                                         |
|:-------------------------|:-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `absolute`               | 如果给定数字为负，返回其对应的正数；否则原样返回。                                                                                                                                                            |
| [`add`](#add)            | 返回两个给定数字之和。                                                                                                                                                                                       |
| `and`                    | 对给定布尔值执行逻辑与运算。                                                                                                                                                                                 |
| `base64decode`           | 解码包含 Base64 序列的字符串。                                                                                                                                                                               |
| `base64encode`           | 将字符串编码为 Base64 序列。                                                                                                                                                                                 |
| `basename`               | 返回路径的最后一个元素。                                                                                                                                                                                     |
| `bcrypt`                 | 使用 Blowfish 加密算法计算给定字符串的哈希。                                                                                                                                                                 |
| `byteslen`               | 返回给定缓冲区的总字节数。                                                                                                                                                                                   |
| `bytesslice`             | 从给定缓冲区中提取子切片。                                                                                                                                                                                   |
| `can`                    | 尝试对其第一个参数中的表达式进行求值。                                                                                                                                                                       |
| `ceil`                   | 返回不小于给定值的最小整数（向上取整）。                                                                                                                                                                     |
| `chomp`                  | 移除给定字符串末尾的一个或多个换行符。                                                                                                                                                                       |
| `chunklist`              | 将单个列表拆分为多个列表，每个列表的元素数不超过给定上限。                                                                                                                                                   |
| `cidrhost`               | 在给定的 IP 网络地址前缀（CIDR）内计算完整主机 IP。                                                                                                                                                          |
| `cidrnetmask`            | 将 CIDR 表示的 IPv4 前缀转换为子网掩码地址。                                                                                                                                                                 |
| `cidrsubnet`             | 在给定的 IP 网络地址前缀（CIDR）内计算一个子网地址。                                                                                                                                                         |
| `cidrsubnets`            | 一次计算多个连续的子网地址，而非仅一个。                                                                                                                                                                     |
| `coalesce`               | 返回参数中第一个非 null 的值；若没有非 null 参数则报错。                                                                                                                                                     |
| `coalescelist`           | 返回参数中第一个长度大于零的序列。                                                                                                                                                                           |
| `compact`                | 移除给定字符串列表中的所有空字符串元素。                                                                                                                                                                     |
| `concat`                 | 将所有给定列表或元组按输入顺序连接为一个序列。                                                                                                                                                               |
| `contains`               | 若给定值存在于目标列表/元组/集合中返回 true，否则返回 false。                                                                                                                                                 |
| `convert`                | 将值转换为指定的类型约束，使用 HCL 的 customdecode 扩展以支持类型表达式。                                                                                                                                     |
| `csvdecode`              | 按 RFC 4180 解析 CSV 字符串，使用首行为表头定义对象属性，返回表示数据表的对象映射。                                                                                                                         |
| `dirname`                | 返回路径的目录部分。                                                                                                                                                                                         |
| `distinct`               | 移除列表中的重复值，保留剩余元素的顺序。                                                                                                                                                                     |
| `divide`                 | 用第一个数字除以第二个数字并返回结果。                                                                                                                                                                       |
| `element`                | 从列表或元组中返回给定索引的元素；若索引大于元素数量则对索引取模。                                                                                                                                            |
| `equal`                  | 若两个给定值相等返回 true，否则返回 false。                                                                                                                                                                   |
| `flatten`                | 将列表/集合/元组拍平成一个元组：若某元素本身是序列，则使用其展平后的所有嵌套元素连接替换。                                                                                                                     |
| `floor`                  | 返回不大于给定值的最大整数（向下取整）。                                                                                                                                                                     |
| `format`                 | 使用类似 C 语言 printf 的格式化语法，将一系列参数应用到格式化动词上构造字符串。                                                                                                                                |
| `formatdate`             | 按给定格式字符串，将 RFC 3339 语法的时间戳转换为另一种机器可读的时间语法。                                                                                                                                     |
| `formatlist`             | 使用类似 printf 的语法，将一系列参数格式化为字符串列表。                                                                                                                                                       |
| `greaterthan`            | 当且仅当第二个数字大于第一个数字时返回 true。                                                                                                                                                                 |
| `greaterthanorequalto`   | 当且仅当第二个数字大于或等于第一个数字时返回 true。                                                                                                                                                           |
| `hasindex`               | 若给定集合可使用指定键进行索引且不会产生错误则返回 true，否则返回 false。                                                                                                                                       |
| `homedir`                | 返回当前用户的主目录。                                                                                                                                                                                       |
| `indent`                 | 在给定字符串每个换行符之后添加指定数量的空格。                                                                                                                                                               |
| `index`                  | 从集合中返回给定键对应的元素；若不存在则报错。                                                                                                                                                               |
| `indexof`                | 查找列表中给定值的元素索引。                                                                                                                                                                                 |
| `int`                    | 丢弃给定数字的小数部分。                                                                                                                                                                                     |
| `join`                   | 使用分隔符连接所有给定列表的元素，生成单个字符串。                                                                                                                                                           |
| `jsondecode`             | 将给定字符串解析为 JSON，并返回 JSON 文档所描述的值。                                                                                                                                                         |
| `jsonencode`             | 返回包含给定值 JSON 表示的字符串。                                                                                                                                                                           |
| `keys`                   | 以字典序返回给定映射的键列表。                                                                                                                                                                               |
| `length`                 | 返回给定集合中的元素数量。                                                                                                                                                                                   |
| `lessthan`               | 当且仅当第二个数字小于第一个数字时返回 true。                                                                                                                                                                 |
| `lessthanorequalto`      | 当且仅当第二个数字小于或等于第一个数字时返回 true。                                                                                                                                                           |
| `log`                    | 返回给定数字在指定底下的对数值。                                                                                                                                                                             |
| `lookup`                 | 从给定映射中返回指定键的值；若不存在则返回默认值。                                                                                                                                                           |
| `lower`                  | 将字符串中的 Unicode 字母转换为小写。                                                                                                                                                                        |
| `max`                    | 返回所有给定数字中的最大值。                                                                                                                                                                                 |
| `md5`                    | 计算给定字符串的 MD5 哈希，并以十六进制编码返回。                                                                                                                                                            |
| `merge`                  | 将给定的多个映射的所有元素合并为单个映射，或将给定对象的属性合并为单个对象。                                                                                                                                   |
| `min`                    | 返回所有给定数字中的最小值。                                                                                                                                                                                 |
| `modulo`                 | 用第一个数字除以第二个数字并返回余数。                                                                                                                                                                       |
| `multiply`               | 返回两个给定数字的乘积。                                                                                                                                                                                     |
| `negate`                 | 将给定数字乘以 -1。                                                                                                                                                                                          |
| `not`                    | 对给定布尔值执行逻辑非运算。                                                                                                                                                                                 |
| `notequal`               | 若两个给定值相等则返回 false，否则返回 true。                                                                                                                                                                 |
| `or`                     | 对给定布尔值执行逻辑或运算。                                                                                                                                                                                 |
| `parseint`               | 按给定进制将字符串解析为数字；若字符串含非法字符则报错。                                                                                                                                                       |
| `pow`                    | 返回给定数字的指定幂（指数运算）。                                                                                                                                                                           |
| `range`                  | 返回在特定范围内等间距分布的数字列表。                                                                                                                                                                       |
| `regex`                  | 对给定字符串应用正则表达式并返回单个匹配的信息；若无匹配则报错。                                                                                                                                             |
| `regex_replace`          | 对给定字符串应用正则表达式，并将所有匹配替换为给定替换串。                                                                                                                                                     |
| `regexall`               | 对给定字符串应用正则表达式，返回所有不重叠匹配的信息列表；若无匹配则返回空列表。                                                                                                                               |
| `replace`                | 将字符串中所有出现的指定子串替换为给定替换串。                                                                                                                                                               |
| `reverse`                | 返回字符顺序反转后的字符串（按 Unicode 字符）。                                                                                                                                                              |
| `reverselist`            | 返回元素顺序反转后的列表。                                                                                                                                                                                   |
| `rsadecrypt`             | 解密使用 RSA 加密的密文。                                                                                                                                                                                    |
| `sanitize`               | 将所有非字母数字字符替换为下划线，仅保留对 Bake 目标名称有效的字符。                                                                                                                                          |
| `sethaselement`          | 若给定集合包含指定元素则返回 true，否则返回 false。                                                                                                                                                           |
| `setintersection`        | 返回所有给定集合的交集。                                                                                                                                                                                     |
| `setproduct`             | 计算两个或更多集合的笛卡尔积。                                                                                                                                                                               |
| `setsubtract`            | 返回两个给定集合的相对补集。                                                                                                                                                                                 |
| `setsymmetricdifference` | 返回两个给定集合的对称差集。                                                                                                                                                                                 |
| `setunion`               | 返回所有给定集合的并集。                                                                                                                                                                                     |
| `sha1`                   | 计算给定字符串的 SHA1 哈希，并以十六进制编码返回。                                                                                                                                                           |
| `sha256`                 | 计算给定字符串的 SHA256 哈希，并以十六进制编码返回。                                                                                                                                                         |
| `sha512`                 | 计算给定字符串的 SHA512 哈希，并以十六进制编码返回。                                                                                                                                                         |
| `signum`                 | 若给定数字为 0 则返回 0；为正返回 1；为负返回 -1。                                                                                                                                                            |
| `slice`                  | 从给定列表或元组中提取子切片。                                                                                                                                                                               |
| `sort`                   | 对给定列表的元素按字典序排序。                                                                                                                                                                               |
| `split`                  | 按给定分隔子串拆分字符串，生成一个或多个子串列表。                                                                                                                                                           |
| `strlen`                 | 返回字符串中的 Unicode 字符数（更准确地说：书写簇）。                                                                                                                                                          |
| `substr`                 | 从给定字符串中提取子串。                                                                                                                                                                                     |
| `subtract`               | 返回两个给定数字的差值。                                                                                                                                                                                     |
| `timeadd`                | 将给定的持续时间（字符串）加到 RFC 3339 时间戳（字符串）上，返回新的 RFC 3339 时间戳。                                                                                                                       |
| `timestamp`              | 返回当前日期时间的字符串表示。                                                                                                                                                                               |
| `title`                  | 将每个非字母与非数字字符后的首字母替换为其大写形式。                                                                                                                                                           |
| `trim`                   | 从字符串首尾移除属于“cutset”的连续字符序列。                                                                                                                                                                  |
| `trimprefix`             | 若存在，则移除字符串起始处的给定前缀。                                                                                                                                                                       |
| `trimspace`              | 按 Unicode 定义，从字符串首尾移除连续空白字符。                                                                                                                                                               |
| `trimsuffix`             | 若存在，则移除字符串末尾的给定后缀。                                                                                                                                                                         |
| `try`                    | 可变参数函数，按序尝试求值其所有参数，某个成功则返回该结果；若均失败则报错。                                                                                                                                   |
| `upper`                  | 将字符串中的 Unicode 字母转换为大写。                                                                                                                                                                        |
| `urlencode`              | 对给定字符串执行 URL 编码。                                                                                                                                                                                  |
| `uuidv4`                 | 生成并返回 4 版 UUID（标准十六进制字符串格式）。                                                                                                                                                              |
| `uuidv5`                 | 生成并返回 5 版 UUID（标准十六进制字符串格式）。                                                                                                                                                              |
| `values`                 | 按键名/属性名字典序返回给定映射的元素值或给定对象的属性值。                                                                                                                                                   |
| `zipmap`                 | 用键列表与对应的值列表构造映射，二者长度必须相同。                                                                                                                                                            |


<!---MARKER_STDLIB_END-->

## 示例

### <a name="add"></a> `add`

```hcl
# docker-bake.hcl 示例
target "webapp-dev" {
  dockerfile = "Dockerfile.webapp"
  tags = ["docker.io/username/webapp:latest"]
  args = {
    buildno = "${add(123, 1)}"
  }
}
```
